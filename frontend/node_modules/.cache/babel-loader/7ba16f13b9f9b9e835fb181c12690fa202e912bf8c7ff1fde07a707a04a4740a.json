{"ast":null,"code":"import { BASE_API_URL } from '../utils/constants';\nimport { getToken } from './token';\nconst getHeaders = () => {\n  const token = getToken();\n  return {\n    'Content-Type': 'application/json',\n    ...(token && {\n      'Authorization': `Bearer ${token}`\n    })\n  };\n};\nexport async function sendMessageApi(message, sessionId = null) {\n  const body = {\n    message\n  };\n  if (sessionId) {\n    body.session_id = sessionId;\n  }\n  const response = await fetch(`${BASE_API_URL}chatbot/`, {\n    method: 'POST',\n    headers: getHeaders(),\n    body: JSON.stringify(body)\n  });\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({}));\n    console.error('Chatbot API error:', response.status, error);\n    throw new Error(error.detail || error.error || 'Error al enviar mensaje');\n  }\n  return response.json();\n}\nexport async function getChatHistorialApi(sessionId) {\n  const response = await fetch(`${BASE_API_URL}chatbot/historial/${sessionId}/`, {\n    headers: getHeaders()\n  });\n  if (!response.ok) throw new Error('Error al obtener historial');\n  return response.json();\n}","map":{"version":3,"names":["BASE_API_URL","getToken","getHeaders","token","sendMessageApi","message","sessionId","body","session_id","response","fetch","method","headers","JSON","stringify","ok","error","json","catch","console","status","Error","detail","getChatHistorialApi"],"sources":["C:/Users/Emily/Desktop/prueba-tecnica/frontend/src/api/chatbot.js"],"sourcesContent":["import { BASE_API_URL } from '../utils/constants';\nimport { getToken } from './token';\n\nconst getHeaders = () => {\n  const token = getToken();\n  return {\n    'Content-Type': 'application/json',\n    ...(token && { 'Authorization': `Bearer ${token}` }),\n  };\n};\n\nexport async function sendMessageApi(message, sessionId = null) {\n  const body = { message };\n  if (sessionId) {\n    body.session_id = sessionId;\n  }\n\n  const response = await fetch(`${BASE_API_URL}chatbot/`, {\n    method: 'POST',\n    headers: getHeaders(),\n    body: JSON.stringify(body),\n  });\n\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({}));\n    console.error('Chatbot API error:', response.status, error);\n    throw new Error(error.detail || error.error || 'Error al enviar mensaje');\n  }\n  return response.json();\n}\n\nexport async function getChatHistorialApi(sessionId) {\n  const response = await fetch(`${BASE_API_URL}chatbot/historial/${sessionId}/`, {\n    headers: getHeaders(),\n  });\n\n  if (!response.ok) throw new Error('Error al obtener historial');\n  return response.json();\n}\n"],"mappings":"AAAA,SAASA,YAAY,QAAQ,oBAAoB;AACjD,SAASC,QAAQ,QAAQ,SAAS;AAElC,MAAMC,UAAU,GAAGA,CAAA,KAAM;EACvB,MAAMC,KAAK,GAAGF,QAAQ,CAAC,CAAC;EACxB,OAAO;IACL,cAAc,EAAE,kBAAkB;IAClC,IAAIE,KAAK,IAAI;MAAE,eAAe,EAAE,UAAUA,KAAK;IAAG,CAAC;EACrD,CAAC;AACH,CAAC;AAED,OAAO,eAAeC,cAAcA,CAACC,OAAO,EAAEC,SAAS,GAAG,IAAI,EAAE;EAC9D,MAAMC,IAAI,GAAG;IAAEF;EAAQ,CAAC;EACxB,IAAIC,SAAS,EAAE;IACbC,IAAI,CAACC,UAAU,GAAGF,SAAS;EAC7B;EAEA,MAAMG,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGV,YAAY,UAAU,EAAE;IACtDW,MAAM,EAAE,MAAM;IACdC,OAAO,EAAEV,UAAU,CAAC,CAAC;IACrBK,IAAI,EAAEM,IAAI,CAACC,SAAS,CAACP,IAAI;EAC3B,CAAC,CAAC;EAEF,IAAI,CAACE,QAAQ,CAACM,EAAE,EAAE;IAChB,MAAMC,KAAK,GAAG,MAAMP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IACrDC,OAAO,CAACH,KAAK,CAAC,oBAAoB,EAAEP,QAAQ,CAACW,MAAM,EAAEJ,KAAK,CAAC;IAC3D,MAAM,IAAIK,KAAK,CAACL,KAAK,CAACM,MAAM,IAAIN,KAAK,CAACA,KAAK,IAAI,yBAAyB,CAAC;EAC3E;EACA,OAAOP,QAAQ,CAACQ,IAAI,CAAC,CAAC;AACxB;AAEA,OAAO,eAAeM,mBAAmBA,CAACjB,SAAS,EAAE;EACnD,MAAMG,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGV,YAAY,qBAAqBM,SAAS,GAAG,EAAE;IAC7EM,OAAO,EAAEV,UAAU,CAAC;EACtB,CAAC,CAAC;EAEF,IAAI,CAACO,QAAQ,CAACM,EAAE,EAAE,MAAM,IAAIM,KAAK,CAAC,4BAA4B,CAAC;EAC/D,OAAOZ,QAAQ,CAACQ,IAAI,CAAC,CAAC;AACxB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}