# =============================================================================
# Railway Configuration
# Sistema de Inventario Lite Thinking
# =============================================================================

[build]
# Usar Dockerfile desde la raíz del proyecto
dockerfilePath = "backend/Dockerfile"

[deploy]
# Puerto de la aplicación
port = 8000

# Comando de inicio - usar sh -c para expansion de variables
startCommand = "sh -c 'echo PORT=$PORT && echo DB_HOST=$DB_HOST && python manage.py collectstatic --noinput && python manage.py migrate --verbosity 2 && python manage.py runserver 0.0.0.0:$PORT'"

# Deshabilitado temporalmente para debug
# healthcheckPath = "/swagger/"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3
